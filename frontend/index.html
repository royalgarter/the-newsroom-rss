<!DOCTYPE html>
<html amp lang="en" class="scroll-smooth overflow-x-hidden">
	<head x-data="alpineHead()">
		<title x-html="title">The Newsroom RSS</title>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="color-scheme" content="light dark">
		<meta name="description" :content="description" content="We just decided: The first step in fixing the world is to Be Informed. Get curated news, delivered your way: fast, personalized RSS.">
		<meta name="keywords" content="news, rss, feed, aggregator, reader, alpinejs, tailwindcss">

		<link rel="canonical" :href="host">
		<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
		<link rel="manifest" href="/manifest.json">

		<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

		<meta name="theme-color" content="#2b7fff">
		<meta name="application-name" :content="title" content="The Newsroom RSS">
		<meta name="msapplication-TileColor" content="#fefefe">
		<meta name="apple-mobile-web-app-status-bar-style" content="#2b7fff">
		<meta name="apple-mobile-web-app-title" :content="title">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="mobile-web-app-capable" content="yes">
		<meta property="og:title" :content="title" content="The Newsroom RSS">
		<meta property="og:description" :content="description" content="We just decided: The first step in fixing the world is to Be Informed. Get curated news, delivered your way: fast, personalized RSS.">
		<meta property="og:image" :content="host + '/screenshots/the-newsroom-rss_600x315.png'" content="/screenshots/the-newsroom-rss_600x315.png">
		<meta property="og:image:secure_url" :content="host + '/screenshots/the-newsroom-rss_600x315.png'" content="/screenshots/the-newsroom-rss_600x315.png">
		<meta property="og:image:alt" :content="host + '/screenshots/the-newsroom-rss_600x315.png'">
		<meta property="og:image:width" content="600">
		<meta property="og:image:height" content="315">
		<meta property="og:url" :content="host + ''">
		<meta property="og:type" content="website">
		<meta property="og:locale" content="en_US">
		<meta property="og:site_name" :content="title" content="The Newsroom RSS">
		<meta name="twitter:title" :content="title" content="The Newsroom RSS">
		<meta name="twitter:description" :content="description" content="We just decided: The first step in fixing the world is to Be Informed. Get curated news, delivered your way: fast, personalized RSS.">
		<meta name="twitter:url" :content="host + ''">
		<meta name="twitter:image" :content="host + '/screenshots/the-newsroom-rss_600x315.png'">
		<meta name="twitter:card" content="summary">
		<meta name="twitter:creator" content="@royalgarter">

		<meta name="referrer" content="no-referrer-when-downgrade">
		<meta name="Cross-Origin-Opener-Policy" content="same-origin-allow-popups">

		<!-- <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript> -->

		<!-- <link rel="preload" as="script" href="//unpkg.com/alpinejs-component@latest/dist/component.min.js" /> -->
		<link rel="preload" as="script" href="//cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js" />
		<link rel="preload" as="script" href="//cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" />
		<!-- <script defer src="//unpkg.com/alpinejs-component@latest/dist/component.min.js"></script> -->
		<script defer src="//cdn.jsdelivr.net/npm/@alpinejs/intersect@3.x.x/dist/cdn.min.js"></script>
		<script defer src="//cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>

		<link rel="preload" as="script" href="//cdn.jsdelivr.net/npm/@mozilla/readability@0.x.x/Readability.min.js" />
		<script async defer src="//cdn.jsdelivr.net/npm/@mozilla/readability@0.x.x/Readability.min.js"></script>

		<link rel="preload" as="script" href="//accounts.google.com/gsi/client" />
		<script async defer src="//accounts.google.com/gsi/client"></script>

		<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/npm/easymde/dist/easymde.min.css" />
		<script async defer src="//cdn.jsdelivr.net/npm/easymde/dist/easymde.min.js"></script>

		<!-- <link rel="preload" as="script" href="//cdn.ampproject.org/v0.js" /> -->
		<!-- <script async defer src="//cdn.ampproject.org/v0.js"></script> -->

		<!-- <script src="//cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script> -->
		<!-- <script src="//cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder"></script> -->
		<!-- Google tag (gtag.js) -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=G-SF3W5SZ5PM"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());

			gtag('config', 'G-SF3W5SZ5PM');
		</script>


		<!-- <link rel="preload" as="script" href="//cdn.jsdelivr.net/npm/@tailwindcss/browser@4" /> -->
		<!-- <script src="//cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script> -->
		<!-- <link rel="stylesheet" href="https://cdn.tailwind-lite.com/2.0.1.css" /> -->

		<link rel="stylesheet" type="text/css" href="index.css?v=1.16">
		<script id="version" src="index.js?v=1.16"></script>
		<script type="module" src="./js/module.mjs"></script>

		<script type="module">
			import { embeddingText } from "./js/llm.mjs";
			window.embeddingText = embeddingText;

			import { hclust } from "./js/hclust.mjs";
			window.hclust = hclust;
		</script>

	</head>
	<body x-cloak x-data="alpineRSS()" class="min-h-screen flex flex-col overflow-x-hidden font-mono">
		<template id="tpl_header" x-if="ready">
			<header class="p-4 border-b text-center flex items-center justify-start max-w-auto">
				<!-- Hamburger Menu -->
				<div class="relative"
					id="menu_burger"
					x-data="{
						categories: [
							{href: '/?topic=world', text: 'Global World'},
							{href: '/?topic=business', text: 'Business'},
							{href: '/?topic=technology', text: 'Technology'},
							{href: '/?topic=entertainment', text: 'Entertainment'},
							{href: '/?topic=sports', text: 'Sports'},
							{href: '/?topic=science', text: 'Science'},
							{href: '/?topic=health', text: 'Health'},
							{href: '/?topic=crypto', text: 'Crypto'},
							{href: '/?topic=ai', text: 'AI'},
						],
						anchors: [],
						refresh: function() {
							this.anchors = [...document.querySelectorAll('a.rss-feed-anchor')].map((a, i) => ({
								href: '#' + a.name,
								text: '# [' + (i + 1) + '] ' + (a.textContent || a.name || a.href).toLowerCase().substr(0, 100).trim() + (a.title ? (' - ' + a.title) : ''),
							}));
						}
					}"
					x-init="refresh()"
				>
					<button @click="burger_open = !burger_open" class="focus:outline-none cursor-pointer px-2 py-1">
						[≡]
					</button>
					<!-- 2-level Menu -->
					<div x-show="burger_open" @click.away="burger_open = false" class="absolute left-0 w-48 z-100" :class="isDark() ? 'bg-black' : 'bg-white'">
						<ul class="py-1">
							<li>
								<a id="burger_newsfeed" href="/#home" class="block px-4 py-2 text-left text-sm hover:underline">News Feed</a>
							</li>
							<li>
								<a href="#bookmarks" class="block px-4 py-2 text-left text-sm hover:underline">Bookmarks</a>
							</li>
							<li>
								<a href="#bookmarks_note" class="block px-4 py-2 text-left text-sm hover:underline">Notes</a>
							</li>
							<li>
								<a href="#" @click.prevent="burger_sub_cat_open = !burger_sub_cat_open" class="flex items-center px-4 py-2 text-left text-sm hover:underline">
									<span>Topics</span>
									<span class="ml-4" x-text="burger_sub_cat_open ? '[▲]' : '[▼]'"></span>
								</a>
								<ul x-show="burger_sub_cat_open" class="pl-4">
									<template x-for="(cat, index) in categories" :key="index">
										<li>
											<a class="block px-4 py-2 text-left text-sm hover:underline"
												:href="cat.href" x-text="cat.text"
												@click=""
											></a>
										</li>
									</template>
								</ul>
							</li>
							<li>
								<a href="https://feathernote.newsrss.org" class="block px-4 py-2 text-left text-sm hover:underline">Feathernote</a>
							</li>
							<li>
								<a href="https://rwatimes.io" class="block px-4 py-2 text-left text-sm hover:underline">RWA Times</a>
							</li>
							<li>
								<a href="#settings" class="block px-4 py-2 text-left text-sm hover:underline">Settings</a>
							</li>
							<li>
								<a href="#declarations" class="block px-4 py-2 text-left text-sm hover:underline" x-text="'About v' + new URL(document.getElementById('version').src).searchParams.get('v')">About</a>
							</li>
						</ul>
					</div>
				</div>

				<a id="anchor_home" href="#home" name="home" class="scroll-smooth"></a>
				<h1 class="mx-auto text-center text-lg md:text-2xl pb-1 md:pb-0 font-bold"
					:class="loading ? 'italic' : 'cursor-pointer'"
					x-html="title"
					@click="if (loading) {
						window.scrollTo({ top: 0, behavior: 'smooth' });
						location.hash = '';
					} else {
						location.hash = '';

						if ('single_view' == params?.f) {
							const url = new URL(location);
							url.searchParams.delete('f');
							url.searchParams.delete('u');
							location.href = url.toString();
						} else {
							location.reload();
						}
					}
					"
				></h1>

				<div class="flex items-center space-x-4">
					<button class="hidden focus:outline-none cursor-pointer px-2 py-1"
						@click="toggleDarkMode()"
						aria-label="Toggle Dark Mode">
						<span x-text="dark ? '[Light]' : '[Dark]'"></span>
					</button>
					<img width="32" height="32"
						id="img-profile"
						@click="clickedProfile()"
						:src="profile?.picture || '/default-profile-64x64.png'"
						:alt="profile?.picture ? 'Back to Anonymous' : 'Sync with Google'"
						:title="profile?.picture ? 'Back to Anonymous' : 'Sync with Google'"
						class="self-center w-8 h-8 pb-1 cursor-pointer"
						onerror="this.src = '/default-profile-64x64.png';">
				</div>

			</header>
		</template>

		<div id='loading_bar' class="flex h-[2px] bg-black border-b"
			:class="(loadingPercent > 0 && loadingPercent < 0.99) ? ('visible w-' + loadingFraction) : 'invisible'"
		></div>

		<main id="main" class="w-full mx-auto flex-1 md:px-2">
			<!-- feeds -->
			<template id="tpl_feeds" x-for="(feed, index) in feeds" :key="index">
				<section class="rss-feed relative border-b mb-4"
					:class="(loading || feed.loading) ? 'cursor-wait': ''"
					x-cloak
					x-show="!is_hide_feeds && (feed?.items?.length > 0)"
				>
					<!-- feed title -->
					<a target="_blank" class="rss-feed-anchor scroll-smooth"
						:title="feed.short_title"
						:name="feed.anchor"
						:href="('#' + feed.anchor) || feed.link || feed.rss_url"
					>
						<span class="inline-flex items-baseline pt-5 sm:pt-4 md:pt-8 px-3 sm:px-8 md:px-10">
							<img width="24" height="24" class="rss-favicon self-center w-6 h-6 mr-2 md:mr-4 cursor-pointer"
								:alt="feed.rss_url || feed.title"
								:src="feed.favicon_url"
								onerror="this.src = '/favicons/ios/128.png';"
								@click="window.open(feed.rss_url)"
							/>
							<h2 class="text-xl font-bold mx-auto"
								:title="feed.rss_url"
								x-text="feed.short || feed.title">
							</h2>
						</span>
						<span x-show="loading || feed.loading">. . .</span>
					</a>

					<!-- feed rss -->
					<div class="w-full mx-auto px-3 sm:px-8 md:px-10  pt-3 sm:pt-4 md:pt-6  pb-18 sm:pb-18 md:pb-18">
						<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-6">
							<!-- rss-item -->
							<template x-for="(item, itemIndex) in feed.items.filter(x => !x?.disable)" :key="itemIndex">
								<div class="rss-item border p-2 relative"
									:class="[
										item.viewed ? 'italic' : '',
										style()?.preview ? 'pb-8' : '',
										'single_view' == params?.f ? 'col-span-full' : '',
									].join(' ')
									"
								>
									<!-- thumbnail -->
									<template x-if="style()?.img && item.image_thumb">
										<div class="rss-meta relative min-h-36 border-b">
											<a class="rss-thumb" 
												:href="'#' + item.anchor" 
												:name="item.anchor"
											>

												<img width="320" height="320"
													class="rss-thumb w-full min-h-36 max-h-80"
													:loading="(index <= 1) ? 'eager' : 'lazy'"
													:fetchpriority="(index <= 1) ? 'high' : 'low'"
													:alt="item.title"
													:domain="new URL(feed.link).hostname"
													:src="item?.image_thumb || ('https://static.photos/640x360/' + encodeURIComponent(item.title))"
													onerror="this.src = 'https://static.photos/640x360' || 'https://www.google.com/s2/favicons?domain=' + this.getAttribute('domain') +'&sz=256';"
												/>
											</a>
											<a class="rss-tags" rel="author" x-show="item.author?.length" :href="item.link_author || item.link" target="_blank">
												<div class="absolute bottom-0 left-0 border px-2 py-1 text-sm hover:underline font-semibold"
													x-html="item.author_formatted">
												</div>
											</a>

											<a class="rss-author" :href="item.link" target="_blank">
												<div class="text-xs font-semibold p-1 border absolute top-0 right-0 flex flex-col items-center justify-center mt-3 mr-2 hover:underline">
													<small class="break-words text-center"
														x-html="item.published_formatted">
													</small>
												</div>
											</a>
										</div>
									</template>

									<!-- title & description -->
									<div id="rss-item-title-desc" class="p-2">
										<span x-show="item.viewed && style()?.preview" class="py-1 text-xs mr-1 flex flex-row items-center">
											<span>[Seen]</span>
											<span class="ml-1" x-text="item.viewed"></span>
										</span>

										<div class="items-center">
											<a :href="item.link" target="_blank" class="hover:underline">
												<span x-show="item.image_thumb && !style()?.img">[Link]</span>
											</a>
											<a class="rss-title inline font-semibold max-w-full text-lg mb-2 hover:underline"

												:class="( item.image_thumb &&
															!style()?.img
														) ? 'pointer-events-none' : ''"
												:href="item.link" target="_blank"
												:title="item.title"
												x-html="(item.title_formatted || item.title) + (
															style()?.img ? '' : (item.published_formatted && !item.published_formatted.includes('NaN') ? (' <sup class=&quot;text-xs font-light&quot;>' + item.published_formatted + '</sup>') : '')
														)"
												rel="external"
											></a>
										</div>

										<template x-if="style()?.desc">
											<p class="rss-desc pt-3 text-sm whitespace-pre-line break-words"
												x-html="item.description_formatted || item.description"
											>
											</p>
										</template>
									</div>

									<!-- item article -->
									<template x-if="style()?.preview">
										<div :id="'rss-item-article-' + index + '-' + itemIndex">
											<div class="px-2 pb-1 flex flex-row items-center absolute bottom-0 left-0 w-full border-t">
												<span class="cursor-pointer py-1 text-xs flex flex-row items-center px-1"
													@click="item?.toggleReadmore?.()"
													@mouseover="item?.prefetchContent?.()"
													:class="[
														(item.article ? 'visible' : 'disable__invisible'),
														(item.prefetching && item.no_article ? 'invisible' : '')
													].join(' ')"
												>
													<span x-text="item.read_more ? '[Collapse]' : (item.prefetching && !item.no_article && !item.article?.content ? '[Loading]' : '[Preview]')"></span>
												</span>

												<span class="py-1 text-xs flex items-center cursor-pointer px-1 ml-auto mr-3"
													@mouseover="item?.prefetchContent?.()"
													@click="
														let share_url = item.article?.content?.length ? (location.origin + '/?f=single_view&u=' + item.link) : item.link;
														toast('Copied: ' + share_url);
														navigator?.clipboard?.writeText?.(share_url);
														( 
															item.article?.content?.length 
															&& navigator?.share?.({
																title: item.title || share_url,
																text: item.description || share_url,
																url: share_url,
															})
														) 
														|| window.open(share_url, '_blank');
													" 
												>
													[Share]
												</span>

												<span class="py-1 text-xs flex items-center cursor-pointer px-1"
													@click="saveReadLater(item)"
												>
													<span x-text="item.read_later ? '[Unsave]' : '[Save]'"></span>
												</span>
											</div>
											<template x-if="item.read_more">
												<div :class="item.read_more ? 'block' : 'hidden'"
													class="block sm:hidden px-4 py-2 flex flex-row items-center border-t"
												>
													<span class="max-w-full py-1 text-xs flex flex-row items-center">
														<p class="rss-article-content max-w-full text-sm whitespace-pre-line break-words" x-html="item.article?.content || ''">
														</p>
													</span>
												</div>
											</template>
										</div>
									</template>
								</div>
							</template>
						</div>

						<!-- feed footer -->
						<div class="absolute flex items-center justify-between w-full py-6" x-show="'single_view' != params?.f">
							<!-- feed tags -->
							<div id="feed_tags" class="">
								<span class="cursor-pointer inline-flex px-1" @click="$el.nextElementSibling.classList.toggle('inline-flex')">[Tags]</span>
								<div class="rss-feed-tag hidden space-x-2 pl-2 items-center text-sm">
									<template x-for="(tag, tagIndex) in feed.tags" :key="tagIndex">
										<div class="inline-flex justify-between px-1">
											<div class="cursor-pointer w-5 h-5 pl-0.5 font-bold" @click="feed.toggleTag?.(tag)" >x</div>
											<div class="select-none pr-1" x-html="tag"></div>
										</div>
									</template>
									<div class="inline-flex justify-between pl-1">
										<div class="cursor-pointer w-5 h-5 pr-1 text-center font-bold"
											@click="$el.nextElementSibling.classList.toggle('hidden')" >[+]</div>
										<input placeholder="new tag"
											class="hidden w-20 px-3 italic focus:outline-none"
											@keyup.enter="feed.toggleTag?.($el.value); $el.value='';"
										/>
									</div>
								</div>
							</div>

							<!-- feed load more -->
							<span id="load_more"
								@click="feed.loadMore()"
								:class="feed.loadMore ? 'visible' : 'invisible'"
								class="pr-7 sm:pr-15 md:pr-20 text-sm font-bold italic flex items-center cursor-pointer px-2"
							>[Read more]</span>
						</div>

						<!-- feed article -->
						<template x-if="feed.read_more && feed.article">
							<div :id="'rss-feed-article-' + index" x-show="feed.read_more && feed.article"
								class="hidden sm:block grid grid-cols-1 gap-6 justify-items-center"
								:class="'single_view' != params?.f ? 'pt-18' : 'pt-0'"
								x-intersect:leave="false && feed.read_more && feed.article && feed.read_more_item?.toggleReadmore?.()"
							>
								<div class="container max-w-3xl mx-auto p-2 overflow-hidden">
									<div class="px-4 py-2 flex flex-row items-center border-b">
										<span class="py-1 text-xl font-bold flex flex-row items-center">
											<p class="rss-article-title whitespace-pre-line break-words" x-html="feed.article?.title || ''">
											</p>
										</span>
									</div>
									<div class="px-4 py-2 flex flex-row items-center">
										<span class="max-w-full py-1 text-sm flex flex-row items-center">
											<p class="rss-article-content max-w-full whitespace-pre-line break-words" x-html="feed.article?.content || ''">
											</p>
										</span>
									</div>
									<div @click="feed.read_more_item?.toggleReadmore?.()" class="cursor-pointer p-2 flex flex-row items-center float-right mt-2">
										<span class="p-1 text-xs font-bold">[▲]</span>
									</div>
								</div>
							</div>
						</template>
					</div>
				</section>
			</template>

			<!-- expanders -->
			<div class="divide-y">

				<!-- readlater -->
				<div id="expander_readlater" x-data="{ expanded: (readlater?.items?.length || is_hide_feeds || !!~location.hash.search(/\#.*note/)) }" class="py-2">
					<a id="anchor_bookmarks" href="#bookmarks" name="bookmarks" class="scroll-smooth"></a>
					<h3 class="text-xl">
						<button
							id="collapse-title-03"
							type="button"
							class="cursor-pointer flex items-center justify-between w-full text-left font-semibold py-2"
							:aria-expanded="expanded"
							aria-controls="collapse-03"
							@click="
								expanded = !expanded;
								Alpine.$data(document.querySelector('body')).is_hide_feeds = expanded;
								if (!expanded) {
									toast('Home feeds loading...');
									Alpine.$data(document.querySelector('body')).loadFeedsWithContent({limit:6});
									if (location.hash?.length) location.hash = '';
								}
							">
							<div>
								<span x-html="'[Bookmarks]' + (readlater?.items?.length ? ' [' + readlater?.items?.length + ']' : '')" class="inline"></span>
							</div>

							<span class="ml-8 font-bold" x-text="expanded ? '▲' : '▼'"></span>
						</button>
					</h3>
					<div
						id="collapse-03"
						role="region"
						aria-labelledby="collapse-title-03"
						class="grid text-sm overflow-hidden w-full"
						:class="expanded ? 'grid-rows-[1fr]' : 'grid-rows-[0fr] hidden'"
						>
						<a id="anchor_bookmarks_note" href="#bookmarks_note" name="bookmarks_note" class="scroll-smooth"></a>
						<div x-data="{ expanded: !!~location.hash.search(/\#.*note/) }" class="m-auto p-4 sm:px-8 md:px-10 max-w-auto w-full mt-2">
							<h4 class="text-lg font-semibold cursor-pointer">
								<button class="flex items-center justify-between w-full text-left cursor-pointer"
									@click="
										expanded = !expanded;
										if (expanded) {
											location.hash = '#bookmarks_note';

											Alpine.$data(document.querySelector('#expander_settings')).expanded = false;

											const url = new URL(location);
											url.searchParams.delete('a');
											history.pushState({}, '', url.toString());
										};
										noteTitle = noteTitle || ('note_at_' + new Date().toLocaleString().replace(/\W+/g, '-'));
									"
								>
									<span>Quick Note</span>
									<span class="font-bold" x-text="expanded ? '▲' : '▼'"></span>
								</button>
							</h4>
							<div x-show="expanded" class="mt-2">
								<input type="text" x-model="noteTitle" placeholder="Add a quick note" class="w-full p-2 mb-2 focus:outline-none">
								<textarea id="noteContent" x-model="noteContent" placeholder="with supported Markdown syntax" class="w-full p-2 mb-2 focus:outline-none" rows="8"></textarea>
								<button @click="addNoteMarkdown()" class="border px-4 py-2 font-bold cursor-pointer">[Markdown]</button>
								<button @click="addNote()" class="border px-4 py-2 font-bold cursor-pointer">[Save]</button>
							</div>
						</div>
						<div id="readlater_items" x-show="readlater?.items?.length" class="m-auto my-4 p-3 sm:p-8 md:p-10 max-w-auto w-full grid grid-cols-1 xl:grid-cols-2 2xl:grid-cols-3 gap-6">
							<!-- readlater item -->
							<template x-for="(item, itemIndex) in readlater.items" :key="itemIndex">
								<div class="rss-item p-2 relative pb-8">
									
									<!-- readlater thumbnail -->
									<template x-if="!item.is_note && style()?.img && item.image_thumb">
										<div class="rss-meta relative min-h-36 border-b"
											@click="location.hash = '#bookmark'+item.link?.replace(/(https?|[^\w\d])/g, '')"
										>
											<a :href="'#bookmark'+item.link?.replace(/(https?|[^\w\d])/g, '')"
												:name="'bookmark'+item.link?.replace(/(https?|[^\w\d])/g, '')" 
											>
												<img width="320" height="320"
													class="rss-thumb w-full min-h-36 max-h-80"
													:alt="item.title"
													:domain="new URL(item.link).hostname"
													:src="item.image_thumb"
													onerror="this.src = 'https://www.google.com/s2/favicons?domain=' + this.getAttribute('domain') +'&sz=256';"
												/>
											</a>
											<a class="rss-tags" rel="author" x-show="item.author?.length" :href="item.link_author || item.link" target="_blank">
												<div class="absolute bottom-0 left-0 px-2 py-1 text-sm hover:underline"
													x-html="item.author_formatted_short">
												</div>
											</a>
										</div>
									</template>
									<!-- readlater title & description -->
									<div class="p-2">
										<span x-show="item.viewed" class="py-1 text-xs mr-1 flex flex-row items-center">
											<span>[Seen]</span>
											<span class="ml-1" x-text="item.viewed"></span>
										</span>
										<a class="rss-title inline font-semibold max-w-full text-lg mb-2 hover:underline"
											:class="( item.image_thumb &&
														!style()?.img
													) ? 'pointer-events-none' : ''"
											:href="item.link" target="_blank"
											:title="item.title"
											x-html="(item.title_formatted || item.title) + (
														(style()?.title && item.published_formatted && !item.published_formatted.includes('NaN'))
															? (' <sup class=&quot;text-xs font-light&quot;>[' + item.published_formatted + ']</sup>')
															: ''
													)"
											rel="external"
										>
										</a>
										<a :href="item.link" target="_blank" x-show="!item.is_note" class="hover:underline">
											[Link]
										</a>
										<template x-if="style()?.desc">
											<p class="rss-desc pt-3 text-sm whitespace-pre-line break-words"
												x-html="item.description_formatted || item.description"
											>
											</p>
										</template>
									</div>
									<!-- readlater article -->
									<div :id="'rss-item-readlater-article-' + itemIndex">
										<div class="cursor-pointer px-2 pb-1 flex flex-row items-center absolute bottom-0 left-0 w-full border-t">
											<template x-if="item.is_note">
												<span @click="editNote(item)" class="py-1 text-xs flex items-center cursor-pointer px-1">
													[Edit]
												</span>
											</template>
											<template x-if="!item.is_note">
												<span class="py-1 text-xs flex flex-row items-center px-1"
													:class="item.article ? 'visible' : 'disable__invisible'"
													@mouseover="item.loadArticle?.()"
													@click="item.loadArticle?.(true);item.read_more = !item.read_more;"
												>
													<span x-text="item.read_more ? '[Collapse]' : (item.loading && !item.article?.content ? '[Loading...]' : '[Content]')"></span>
												</span>
											</template>
											<span @click="saveReadLater(item, true)" class="py-1 text-xs flex items-center cursor-pointer px-1 ml-auto">
												[Delete]
											</span>
										</div>
										<!-- <template x-if="item.read_more"> -->
											<div :class="item.read_more ? 'block' : 'hidden'"
												class="px-4 py-2 flex flex-row items-center border-t"
												x-intersect:leave="false && (item.read_more = false)"
											>
												<span class="max-w-full py-1 text-xs flex flex-row items-center">
													<p class="rss-article-content max-w-full text-sm whitespace-pre-line break-words" x-html="item.article?.content || ''">
													</p>
												</span>
											</div>
										<!-- </template> -->
									</div>
								</div>
							</template>
						</div>
						<div x-show="editingNote" class="fixed inset-0 z-50 flex items-center justify-center">
							<div class="p-6 w-11/12">
								<h4 class="text-lg font-semibold mb-4">Edit Note</h4>
								<input type="text" x-model="editedTitle" placeholder="Note Title" class="w-full p-2 mb-2 focus:outline-none">
								<textarea id="editedContent" x-model="editedContent" placeholder="Note Content" class="w-full p-2 mb-2 focus:outline-none" rows="25"></textarea>
								<div class="flex justify-end space-x-2 mt-4">
									<button @click="updateNoteMarkdown()" class="border px-4 py-2 font-bold cursor-pointer">[Markdown]</button>
									<button @click="updateNote()" class="border px-4 py-2 font-bold cursor-pointer">[Save]</button>
									<button @click="editingNote = null" class="border px-4 py-2 font-bold cursor-pointer">[Cancel]</button>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- settings -->
				<div id="expander_settings" x-data="{ expanded: false }" class="py-2">
					<a id="anchor_settings" href="#settings" name="settings" class="scroll-smooth"></a>
					<h3 class="text-xl">
						<button
							id="collapse-title-01"
							type="button"
							class="cursor-pointer flex items-center justify-between w-full text-left font-semibold py-2"
							@click="expanded = !expanded"
							:aria-expanded="expanded"
							aria-controls="collapse-01"
						>
							<div>
								<span x-html="'[Settings]' + (tasks?.length ? ' [' + tasks.length + ']' : '') + (loading ? ' (Loading...)' : '')" class="inline"></span>
							</div>

							<span class="ml-8 font-bold" x-text="expanded ? '▲' : '▼'"></span>
						</button>
					</h3>

					<div
						id="collapse-01"
						role="region"
						aria-labelledby="collapse-title-01"
						class="grid text-sm overflow-hidden w-full"
						:class="expanded ? 'grid-rows-[1fr]' : 'grid-rows-[0fr] hidden'"
						>
						<template x-if="ready">
							<div class="m-auto my-4 max-w-auto w-full">
								<!-- Input -->
								<div class="text-lg p-4 border-b flex relative justify-around">
									<form @submit.prevent="addNewTask" class="min-w-9/10">
										<input
											x-on:input.change.debounce.300ms='reviewTask()'
											x-model="input"
											class="w-full italic text-base focus:outline-none border-b"
											placeholder=" Enter new RSS feed URL..."
										/>
									</form>
									<button class="px-2 py-1 font-bold cursor-pointer ml-3" @click="addNewTask">[Add]</button>
								</div>

								<!-- rss-review-item -->
								<template id="tpl_review_feed" x-if="review_feed">
									<section class="rss-feed border-b mb-4 italic">
										<a :name="review_feed.anchor" :href="review_feed.rss_url" target="_blank">
											<span class="inline-flex items-baseline pt-5 sm:pt-4 md:pt-8 px-5 sm:px-4 md:px-8">
												<img width="24" height="24" class="rss-favicon self-center w-6 h-6 mr-2 md:mr-4"
													:src="'https://www.google.com/s2/favicons?domain=' + new URL(review_feed.link).hostname +'&sz=128'"
													/>
												<h2 class="font-bold mx-auto truncate"
													x-text="'[REVIEW] ' + review_feed.rss_url"></h2>
											</span>
										</a>
										<div class="max-w-screen-2xl mx-auto p-3 sm:p-8 md:p-10 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-6 gap-6">
											<!-- rss-item -->
											<template x-for="(item, itemIndex) in review_feed.items" :key="itemIndex">
												<div class="rss-item border overflow-hidden p-2">
													<!-- thumbnail -->
													<template x-if="item.images?.[0]?.length">
														<div class="rss-meta relative min-h-48 border-b">
															<img width="240" height="240"
																class="rss-thumb w-full min-h-24 max-h-48"
																loading="eager"
																fetchpriority="high"
																:src="item.images[0]"
																:alt="item.title"
															/>
															<div class="absolute bottom-0 left-0 border px-2 py-1 text-sm hover:underline"
																x-html="(timeSince(new Date(item.published)) + ' ago')">
															</div>
														</div>
													</template>
													<!-- title & description -->
													<div class="p-2">
														<p class="rss-title inline font-semibold max-w-full text-lg mb-2 hover:underline" x-html="item.title"></p>
													</div>
											</template>
										</div>
									</section>
								</template>

								<!-- List -->
								<div class="p-3">
									<span x-show="tasks.length <= 0" class="center italic px-2">
										<p>RSS is <strong>Really Simple Syndication</strong>, allows to access updates to websites in a standardized format, e.g: </p>
										<ul class="ml-6 my-2 list-disc">
											<template x-for="(d, idxDf) in K.DEFAULTS" :key="idxDf">
												<li><p x-html="d" class="break-words overflow-wrap text-wrap"></p></li>
											</template>
										</ul>
									</span>

									<div @drop.prevent="
										if (drag !== null && drop !== null) {
											if (drag < drop)
												tasks = [
													...tasks.slice(0, drag),
													...tasks.slice(drag + 1, drop + 1),
													tasks[drag],
													...tasks.slice(drop + 1)
												];
											else
												tasks = [
													...tasks.slice(0, drop),
													tasks[drag],
													...tasks.slice(drop, drag),
													...tasks.slice(drag + 1)
												];
											storageSet(K.tasks, tasks);
										};
										drop = null;
										"
										@dragover.prevent="$event.dataTransfer.dropEffect = 'move'"
									>
										<template x-for="(item, index) in tasks" :key="index">
											<div class="rss-task-item p-2 mt-2 flex items-center relative"
												:class="{'border-2': drag === index}"
												style="overflow-wrap: anywhere;"
												draggable="true" @dragstart="drag = index" @dragend="drag = null"
											>
												<span class="mr-2 text-xs font-bold min-w-10">[Drag]</span>
												<div class="mx-2">
													<a :href="item.url" target="_blank" class="hover:underline"><span x-text="'[' + (index+1) + '] '+ item.url"></span></a>
												</div>
												<span class="cursor-pointer font-bold ml-auto min-w-6"
													@click="tasks.splice(index, 1);storageSet(K.tasks, tasks);"
												>[X]</span>

												<div class="absolute inset-0 border"
													x-show="drag !== null"
													@dragenter.prevent="if (index !== drag) {drop = index}"
													@dragleave="if (drop === index) drop = null"
												></div>
											</div>
										</template>
									</div>

									<div class="w-full pt-4">
										<div class="flex items-center px-4 py-2">
											<div class="min-w-32">
												<label class="block font-bold md:text-right mb-1 md:mb-0 pr-4" for="settings-hash">
												Hash Identity
												</label>
											</div>
											<div class="w-full cursor-pointer">
												<input class="border-2 w-full py-2 px-4 focus:outline-none" id="settings-hash" type="text" x-model.debounce.500ms="params.x">
											</div>
										</div>
										<div class="flex items-center px-4 py-2">
											<div class="min-w-32">
												<label class="block font-bold md:text-right mb-1 md:mb-0 pr-4" for="settings-limit">
												Items per Feed
												</label>
											</div>
											<div class="w-full cursor-pointer">
												<select class="block w-full py-3 px-4 pr-8 focus:outline-none" id="settings-limit" x-model.number="params.l">
													<template x-for="lim in [3,6,9,12,15,20,24,30,36,48,64,100]">
														<option :value="lim" x-text="lim" :selected="params.l == lim"></option>
													</template>
												</select>
											</div>
										</div>
										<div class="flex items-center px-4 py-2">
											<div class="min-w-32">
												<label class="block font-bold md:text-right mb-1 md:mb-0 pr-4" for="settings-style">
												Display Style
												</label>
											</div>
											<div class="w-full cursor-pointer">
												<select class="block w-full py-3 px-4 pr-8 focus:outline-none" id="settings-style" x-model="params.s">
													<template x-for="sty in Object.keys(style_flags)">
														<option :value="sty" x-text="sty" :selected="params.s == sty"></option>
													</template>
												</select>
											</div>
										</div>
									</div>
								</div>

								<!-- Buttons -->
								<div class="p-3 flex justify-end border-t space-x-4">
									<button
										class="cursor-pointer focus:outline-none uppercase text-xs p-2 font-bold"
										x-show="tasks.length == 0"
										@click="importDefaults()"
									>
										[Import Sample RSS]
									</button>
									<button
										class="cursor-pointer focus:outline-none uppercase text-xs px-4 py-2 font-bold"
										x-show="tasks.length > 0"
										@click="clearAllTasks()"
									>
										[Clear]
									</button>
									<button
										class="cursor-pointer focus:outline-none uppercase text-xs px-4 py-2 font-bold"
										x-show="tasks.length > 0"
										@click="exportTasks()"
									>
										[Export]
									</button>
									<button
										class="cursor-pointer focus:outline-none uppercase text-xs px-4 py-2 font-bold"
										x-show="tasks.length > 0"
										@click="saveTasks()"
									>
										[Save]
									</button>
								</div>
							</div>
						</template>
					</div>
				</div>

				<!-- declarations -->
				<div x-data="{
					html_declarations: function() {
						fetch('/components/declarations.html').then(r => r.text()).then(html => {this.$root.innerHTML = html});
					}
				}" x-init="html_declarations">
				</div>
			</div>

			<!-- errors -->
			<div class="flex gap-4 items-center mb-4 justify-self-center"><span x-show="debug" class="text-red-500" x-text="debug"></span></div>
		</main>

		<template id="tpl_footer" x-if="ready">
			<footer class="border-t p-4 mt-6 text-center text-xs">
				<blockquote class="m-2 text-sm italic">
					"In the Information Age, ignorance is a choice.", "It's not the news, it's HOW you get the news.", "We just decided to try to do it better."
				</blockquote>
				— <cite>Will McAvoy, The Newsroom by Aaron Sorkin</cite>
			</footer>
		</template>

		<div id="toast" class="fixed bottom-3 right-4 border text-sm pb-1 pt-2 px-2 invisible max-w-[350px]">
			<span id="toast-message" class="inline-block overflow-hidden text-ellipsis whitespace-nowrap max-w-full"></span>
		</div>

		<div id="modal" x-show="modal_showed" class="relative z-10" aria-labelledby="modal-prompt" role="dialog" aria-modal="true">
			<div class="fixed inset-0 border"></div>
			<div class="fixed inset-0 z-10 w-screen overflow-y-auto">
				<div class="flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0">
					<div class="relative transform overflow-hidden border text-left sm:my-8 sm:w-full sm:max-w-lg">
						<div class="px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
							<div class="sm:flex sm:items-start">
								<div class="mx-auto flex w-12 h-12 shrink-0 items-center justify-center border sm:mx-0 sm:w-10 sm:h-10">
									<span class="font-bold">!</span>
								</div>
								<div class="mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left" >
									<h3 class="text-base font-semibold" id="modal-title" x-text="modal_title">
										Title
									</h3>
									<div class="mt-2">
										<p class="text-sm" id="modal-text" x-text="modal_text">
											Text.
										</p>
									</div>
								</div>
							</div>
						</div>
						<div class="border-t px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
							<button class="inline-flex w-full cursor-pointer justify-center px-3 py-2 text-sm font-semibold sm:ml-3 sm:w-auto"
								id="modal-ok" x-text="modal_ok || 'OK'" type="button"
								@click="modalCallback(true)">
								OK
							</button>
							<button class="mt-3 inline-flex w-full cursor-pointer justify-center px-3 py-2 text-sm font-semibold sm:mt-0 sm:w-auto"
								id="modal-cancel" x-text="modal_cancel || 'Cancel'" type="button"
								@click="modalCallback(false)">
								Cancel
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>


		<div id="anchor_jump" x-data="{
			_alBody: Alpine.$data(document.querySelector('body')),
			_alRead: Alpine.$data(document.querySelector('#expander_readlater')),
			_alSettings: Alpine.$data(document.querySelector('#expander_settings')),

			is_open: false,
			anchors: [],
			refresh: function() {
				this.anchors = [
					{href: '#home', text: '# [Home]'},
					...[...document.querySelectorAll('a.rss-feed-anchor')].map((a, i) => ({
						href: '#' + a.name,
						text: '# [' + (i + 1) + '] ' + (a.textContent || a.name || a.href).toLowerCase().substr(0, 100).trim() + (a.title ? (' - ' + a.title) : ''),
					})),
				];
			} }" 
			x-init="refresh()"
			class="fixed left-2 bottom-2 text-sm z-100"
		>
			<div x-show="is_open" @click.away="is_open = false" class="border mb-2 overflow-y-auto max-h-128" :class="isDark() ? 'bg-black' : 'bg-white'">
				<template x-for="(anchor, index) in anchors" :key="index">
					<a :href="anchor.href" class="block p-2 hover:underline" x-text="anchor.text" 
						@click="
							is_open = false;

							_alBody.loading = true;

							setTimeout(() => {
								_alRead.expanded = _alBody.is_hide_feeds = location.hash.includes('#bookmarks');
								_alSettings.expanded = _alSettings.expanded && !location.hash.includes('#bookmark');

								const _alDecl = Alpine.$data(document.querySelector('#expander_declarations'));
								if (_alDecl) _alDecl.expanded = (location.hash == '#declarations');

								_alBody.loading = false;
							}, 100);
						">
					</a>
				</template>
			</div>
			<button @click="is_open = !is_open" class="font-bold flex items-center justify-center h-10 w-10 cursor-pointer">
				<span x-text="is_open ? '[▼]' : '[▲]'"></span>
			</button>
		</div>

		<div id="g_id_onload"
			data-client_id="547832701518-ai09ubbqs2i3m5gebpmkt8ccfkmk58ru.apps.googleusercontent.com"
			data-context="use"
			data-ux_mode="popup"
			data-auto_prompt="false"
			data-use_fedcm_for_prompt="true"
			data-skip_prompt_cookie="SID"
			data-auto_select="true"
			data-itp_support="true"
			data-callback="handleGoogle1TapSignin">
		</div>
	</body>
</html>